# 存储升级：IndexedDB 迁移 (2026-02-05)

## 背景
用户提到计划写作 1000 章以上的小说，目前的 `localStorage` (约 5MB) 无法满足需求，且存在字数过多导致崩溃的风险。需要升级到 `IndexedDB` (容量 > 500MB)。

## 目标
- 引入 `localforage` 库管理本地存储。
- 改造 `novel` store，从同步读写改为异步读写。
- 实现数据迁移：启动时检查 `localStorage` 中的旧数据并迁移到 `IndexedDB`。

## 任务分解
- [ ] 安装依赖 `localforage` <!-- id: storage-01 -->
- [ ] 创建存储服务模块 `src/utils/storage.js` <!-- id: storage-02 -->
- [ ] 改造 `src/stores/novel.js` <!-- id: storage-03 -->
    - [ ] 初始化时加载数据
    - [ ] 实现数据迁移逻辑 (localStorage -> IndexedDB)
    - [ ] 改造 `saveToStorage` 为异步
- [ ] 验证数据持久化 <!-- id: storage-04 -->
- [ ] 验证大容量写入 (模拟测试) <!-- id: storage-05 -->
