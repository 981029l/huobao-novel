import{d as V,c as m,o as g,a as e,b as T,u as S,e as z,f as I,r as U,g as F,w as L,h as q,i as d,j as l,k as o,N as R,l as y,m as O,n as E,p as M,B as j,q as k,s as $,t as H,v as C,x as h,y as W,z as J,A as K,C as Q,D as X,F as D,E as P}from"./index-rX0A5NG0.js";import{C as Y,D as Z,P as ee,T as te}from"./TrendingUpOutline-BbjHMSX9.js";const re={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},oe=e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M256 112v288"},null,-1),le=e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32",d:"M400 256H112"},null,-1),ae=[oe,le],A=V({name:"AddOutline",render:function(b,s){return g(),m("svg",re,ae)}}),se={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ne=e("path",{d:"M461.81 53.81a4.4 4.4 0 0 0-3.3-3.39c-54.38-13.3-180 34.09-248.13 102.17a294.9 294.9 0 0 0-33.09 39.08c-21-1.9-42-.3-59.88 7.5c-50.49 22.2-65.18 80.18-69.28 105.07a9 9 0 0 0 9.8 10.4l81.07-8.9a180.29 180.29 0 0 0 1.1 18.3a18.15 18.15 0 0 0 5.3 11.09l31.39 31.39a18.15 18.15 0 0 0 11.1 5.3a179.91 179.91 0 0 0 18.19 1.1l-8.89 81a9 9 0 0 0 10.39 9.79c24.9-4 83-18.69 105.07-69.17c7.8-17.9 9.4-38.79 7.6-59.69a293.91 293.91 0 0 0 39.19-33.09c68.38-68 115.47-190.86 102.37-247.95zM298.66 213.67a42.7 42.7 0 1 1 60.38 0a42.65 42.65 0 0 1-60.38 0z",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),de=e("path",{d:"M109.64 352a45.06 45.06 0 0 0-26.35 12.84C65.67 382.52 64 448 64 448s65.52-1.67 83.15-19.31A44.73 44.73 0 0 0 160 402.32",fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"32"},null,-1),ie=[ne,de],B=V({name:"RocketOutline",render:function(b,s){return g(),m("svg",se,ie)}}),ue={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:"0 0 512 512"},ce=T('<path d="M112 112l20 320c.95 18.49 14.4 32 32 32h184c17.67 0 30.87-13.51 32-32l20-320" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="32" d="M80 112h352" fill="currentColor"></path><path d="M192 112V72h0a23.93 23.93 0 0 1 24-24h80a23.93 23.93 0 0 1 24 24h0v40" fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M256 176v224"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M184 176l8 224"></path><path fill="none" stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="32" d="M328 176l-8 224"></path>',6),ge=[ce],pe=V({name:"TrashOutline",render:function(b,s){return g(),m("svg",ue,ge)}}),me={class:"grid grid-cols-1 sm:grid-cols-2 gap-4"},be={class:"flex flex-col-reverse sm:flex-row gap-2 sm:justify-end"},xe={__name:"CreateProjectDialog",props:{modelValue:Boolean},emits:["update:modelValue"],setup(c,{emit:b}){const s=c,x=b,w=S(),v=z(),_=I(),f=U(null),r=F({title:"",topic:"",genre:["玄幻"],numberOfChapters:100,wordNumber:3e3,userGuidance:""}),n=[{label:"玄幻",value:"玄幻"},{label:"仙侠",value:"仙侠"},{label:"都市",value:"都市"},{label:"历史",value:"历史"},{label:"科幻",value:"科幻"},{label:"奇幻",value:"奇幻"},{label:"武侠",value:"武侠"},{label:"言情",value:"言情"},{label:"悬疑",value:"悬疑"},{label:"军事",value:"军事"},{label:"末日/废土",value:"末日/废土"},{label:"无限流",value:"无限流"},{label:"系统流",value:"系统流"},{label:"重生",value:"重生"},{label:"穿越",value:"穿越"},{label:"诡异流",value:"诡异流"},{label:"香火流",value:"香火流"},{label:"克苏鲁/诡秘",value:"克苏鲁/诡秘"},{label:"规则怪谈",value:"规则怪谈"},{label:"直播",value:"直播"},{label:"电竞",value:"电竞"},{label:"游戏",value:"游戏"},{label:"赘婿",value:"赘婿"},{label:"神豪",value:"神豪"},{label:"种田/经营",value:"种田/经营"},{label:"领主",value:"领主"},{label:"召唤流",value:"召唤流"},{label:"兵王",value:"兵王"},{label:"神医",value:"神医"},{label:"鉴宝",value:"鉴宝"},{label:"风水/玄学",value:"风水/玄学"},{label:"盗墓",value:"盗墓"},{label:"职场",value:"职场"},{label:"校园",value:"校园"},{label:"豪门",value:"豪门"},{label:"甜宠",value:"甜宠"},{label:"娱乐圈",value:"娱乐圈"},{label:"体育",value:"体育"},{label:"灵异",value:"灵异"},{label:"二次元",value:"二次元"},{label:"同人",value:"同人"},{label:"轻小说",value:"轻小说"},{label:"其他",value:"其他"}],t={title:[{required:!0,message:"请输入项目名称",trigger:"blur"}],topic:[{required:!0,message:"请输入小说主题",trigger:"blur"}],genre:[{required:!0,trigger:"change",validator:(p,a)=>Array.isArray(a)&&a.length>0?!0:new Error("请选择小说类型")}],numberOfChapters:[{required:!0,message:"请输入章节数量",trigger:"blur",type:"number"}],wordNumber:[{required:!0,message:"请输入每章字数",trigger:"blur",type:"number"}]};L(()=>s.modelValue,p=>{p&&(r.title="",r.topic="",r.genre=["玄幻"],r.numberOfChapters=100,r.wordNumber=3e3,r.userGuidance="")});async function i(){if(f.value)try{await f.value.validate();const p=await v.createProject({title:r.title,topic:r.topic,genre:r.genre,numberOfChapters:r.numberOfChapters,wordNumber:r.wordNumber,userGuidance:r.userGuidance});_.success("项目创建成功"),x("update:modelValue",!1),w.push(`/project/${p.id}`)}catch{}}return(p,a)=>(g(),q(o(H),{show:c.modelValue,"onUpdate:show":a[7]||(a[7]=u=>x("update:modelValue",u)),"mask-closable":!1,preset:"card",title:"创建新项目",style:{width:"min(620px, calc(100vw - 20px))"},bordered:!1,class:"!rounded-2xl create-project-modal"},{footer:d(()=>[e("div",be,[l(o(j),{class:"w-full sm:w-auto",onClick:a[6]||(a[6]=u=>x("update:modelValue",!1))},{default:d(()=>[...a[8]||(a[8]=[k("取消",-1)])]),_:1}),l(o(j),{class:"w-full sm:w-auto",type:"primary",onClick:i},{icon:d(()=>[l(o($),null,{default:d(()=>[l(o(Y))]),_:1})]),default:d(()=>[a[9]||(a[9]=k(" 创建项目 ",-1))]),_:1})])]),default:d(()=>[l(o(R),{ref_key:"formRef",ref:f,model:r,rules:t,"label-placement":"top",class:"space-y-1 max-h-[68vh] overflow-y-auto pr-1"},{default:d(()=>[l(o(y),{label:"项目名称",path:"title"},{default:d(()=>[l(o(O),{value:r.title,"onUpdate:value":a[0]||(a[0]=u=>r.title=u),placeholder:"例如：星辰大海",maxlength:50,"show-count":""},null,8,["value"])]),_:1}),l(o(y),{label:"小说主题 / 核心创意",path:"topic"},{default:d(()=>[l(o(O),{value:r.topic,"onUpdate:value":a[1]||(a[1]=u=>r.topic=u),type:"textarea",rows:3,placeholder:"描述你的小说核心创意，例如：一个普通少年意外获得神秘传承，在修仙世界中逐步成长...",maxlength:500,"show-count":""},null,8,["value"])]),_:1}),l(o(y),{label:"小说类型",path:"genre"},{default:d(()=>[l(o(E),{value:r.genre,"onUpdate:value":a[2]||(a[2]=u=>r.genre=u),options:n,multiple:"",class:"w-full"},null,8,["value"])]),_:1}),e("div",me,[l(o(y),{label:"预计章节数",path:"numberOfChapters"},{default:d(()=>[l(o(M),{value:r.numberOfChapters,"onUpdate:value":a[3]||(a[3]=u=>r.numberOfChapters=u),min:10,max:1e4,step:10,class:"w-full"},null,8,["value"])]),_:1}),l(o(y),{label:"每章字数",path:"wordNumber"},{default:d(()=>[l(o(M),{value:r.wordNumber,"onUpdate:value":a[4]||(a[4]=u=>r.wordNumber=u),min:1e3,max:1e4,step:500,class:"w-full"},null,8,["value"])]),_:1})]),l(o(y),{label:"创作指导 (可选)"},{default:d(()=>[l(o(O),{value:r.userGuidance,"onUpdate:value":a[5]||(a[5]=u=>r.userGuidance=u),type:"textarea",rows:3,placeholder:"可以在这里添加额外的创作要求，如特定角色设定、情节走向、写作风格等...",maxlength:1e3,"show-count":""},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show"]))}},G=(c,b)=>{const s=c.__vccOpts||c;for(const[x,w]of b)s[x]=w;return s},ve={class:"p-4 md:p-5"},he={class:"flex items-start justify-between mb-3"},fe={class:"flex-1 min-w-0"},we={class:"text-base md:text-lg font-semibold text-gray-800 dark:text-white truncate group-hover:text-indigo-600 dark:group-hover:text-indigo-400 transition-colors"},ke={class:"text-xs md:text-sm text-gray-500 dark:text-gray-400 mt-1"},ye={class:"text-sm text-gray-600 dark:text-gray-300 line-clamp-2 mb-3 md:mb-4 leading-relaxed"},_e={class:"mb-3 md:mb-4"},je={class:"flex justify-between text-xs text-gray-500 dark:text-gray-400 mb-2"},Ce={class:"font-medium"},$e={class:"flex items-center justify-between pt-2.5 md:pt-3 border-t border-gray-100 dark:border-gray-700/50"},Ne={class:"text-xs text-gray-400"},Oe={__name:"ProjectCard",props:{project:{type:Object,required:!0}},emits:["click","delete"],setup(c,{emit:b}){const s=c,x=b;function w(r){return new Date(r).toLocaleDateString("zh-CN",{year:"numeric",month:"short",day:"numeric"})}const v=C(()=>s.project.blueprintGenerated?{text:"大纲已生成",type:"success"}:s.project.architectureGenerated?{text:"架构已生成",type:"warning"}:{text:"待生成",type:"info"}),_=C(()=>{var n;const r=(n=s.project)==null?void 0:n.genre;return Array.isArray(r)?r.join(" / "):r||""}),f=C(()=>{let r=0;return s.project.coreSeed&&r++,s.project.characterDynamics&&r++,s.project.worldBuilding&&r++,s.project.plotArchitecture&&r++,s.project.chapterBlueprint&&r++,Math.round(r/5*100)});return(r,n)=>(g(),m("div",{class:"bg-white dark:bg-[#1f1f23] rounded-2xl border border-gray-100 dark:border-gray-800 overflow-hidden cursor-pointer group active:scale-[0.99] hover:shadow-xl hover:shadow-indigo-500/5 dark:hover:shadow-indigo-500/10 hover:border-indigo-200 dark:hover:border-indigo-600/30 transition-all duration-300 relative",onClick:n[1]||(n[1]=t=>x("click"))},[e("div",ve,[e("div",he,[e("div",fe,[e("h3",we,h(c.project.title),1),e("p",ke,h(_.value)+" · "+h(c.project.numberOfChapters)+" 章 ",1)]),l(o(j),{circle:"",quaternary:"",size:"small",class:"opacity-100 md:opacity-0 md:group-hover:opacity-100 transition-opacity !ml-2",onClick:n[0]||(n[0]=W(t=>x("delete"),["stop"]))},{icon:d(()=>[l(o($),{class:"text-gray-400 hover:text-red-500"},{default:d(()=>[l(o(pe))]),_:1})]),_:1})]),e("p",ye,h(c.project.topic),1),e("div",_e,[e("div",je,[n[2]||(n[2]=e("span",null,"生成进度",-1)),e("span",Ce,h(f.value)+"%",1)]),l(o(J),{type:"line",percentage:f.value,height:6,"show-indicator":!1,"border-radius":4,"rail-color":"rgba(0,0,0,0.05)","fill-border-radius":4},null,8,["percentage"])]),e("div",$e,[l(o(K),{type:v.value.type,size:"small",bordered:!1,round:""},{default:d(()=>[k(h(v.value.text),1)]),_:1},8,["type"]),e("span",Ne,h(w(c.project.updatedAt)),1)])])]))}},Ve=G(Oe,[["__scopeId","data-v-cd21cc27"]]),Me={class:"max-w-6xl mx-auto px-4 pb-24 md:pb-0"},De={class:"text-center py-6 md:py-16 mb-2 md:mb-8"},Pe={class:"inline-flex items-center gap-2 px-3.5 py-1.5 md:px-4 md:py-2 rounded-full bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400 text-xs md:text-sm font-medium mb-4 md:mb-6"},Ae={class:"md:hidden mt-4 p-2 rounded-2xl mobile-surface-glass border border-gray-100/80 dark:border-gray-700/70 shadow-sm"},Be={class:"grid grid-cols-3 gap-2"},Se={class:"text-sm font-bold text-gray-800 dark:text-gray-100"},ze={class:"text-[10px] text-gray-500 dark:text-gray-400 mt-0.5"},Ie={key:0,class:"mb-12"},Ue={class:"flex items-center justify-between mb-6"},qe={class:"text-xl font-bold text-gray-800 dark:text-white"},Ge={class:"text-sm font-normal text-gray-400 ml-2"},Te={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6"},Fe={key:1,class:"text-center py-12 md:py-20 bg-white dark:bg-[#1f1f23] rounded-3xl border-0 shadow-sm md:border md:border-gray-100 dark:md:border-gray-800"},Le={class:"w-24 h-24 mx-auto mb-6 rounded-3xl bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-800 dark:to-gray-800 flex items-center justify-center"},Re={key:2,class:"md:hidden fixed right-5 z-50 mobile-fab-safe"},Ee={class:"hidden md:block mt-20 mb-12"},He={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},We={class:"bg-white dark:bg-[#1f1f23] rounded-2xl p-6 border border-gray-100 dark:border-gray-800 hover:shadow-xl hover:shadow-indigo-500/5 transition-all duration-300 group"},Je={class:"w-12 h-12 rounded-xl bg-indigo-50 dark:bg-indigo-900/20 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"},Ke={class:"bg-white dark:bg-[#1f1f23] rounded-2xl p-6 border border-gray-100 dark:border-gray-800 hover:shadow-xl hover:shadow-purple-500/5 transition-all duration-300 group"},Qe={class:"w-12 h-12 rounded-xl bg-purple-50 dark:bg-purple-900/20 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"},Xe={class:"bg-white dark:bg-[#1f1f23] rounded-2xl p-6 border border-gray-100 dark:border-gray-800 hover:shadow-xl hover:shadow-rose-500/5 transition-all duration-300 group"},Ye={class:"w-12 h-12 rounded-xl bg-rose-50 dark:bg-rose-900/20 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform"},Ze={__name:"HomeView",setup(c){const b=S(),s=z(),x=I(),w=Q(),v=U(!1),_=C(()=>{const n=s.projectList||[],t=n.reduce((p,a)=>p+Object.keys(a.chapters||{}).length,0),i=n.reduce((p,a)=>p+Object.values(a.chapters||{}).reduce((u,N)=>u+((N==null?void 0:N.length)||0),0),0);return[{label:"项目数",value:String(n.length)},{label:"已写章节",value:String(t)},{label:"累计字数",value:i>=1e4?`${(i/1e4).toFixed(1)}w`:String(i)}]});async function f(n){w.warning({title:"删除确认",content:`确定要删除项目 "${n.title}" 吗？此操作不可恢复。`,positiveText:"删除",negativeText:"取消",onPositiveClick:()=>{s.deleteProject(n.id),x.success("项目已删除")}})}function r(n){b.push(`/project/${n.id}`)}return(n,t)=>(g(),m("div",Me,[e("div",De,[e("div",Pe,[l(o(B),{class:"w-4 h-4"}),t[4]||(t[4]=k(" 基于雪花写作法的 AI 创作工具 ",-1))]),t[6]||(t[6]=e("h1",{class:"text-[30px] leading-tight md:text-5xl font-bold mb-3 md:mb-6 bg-gradient-to-r from-gray-900 via-indigo-800 to-purple-800 dark:from-white dark:via-indigo-200 dark:to-purple-200 bg-clip-text text-transparent"}," AI 小说生成器 ",-1)),t[7]||(t[7]=e("p",{class:"text-gray-600 dark:text-gray-400 text-sm md:text-lg max-w-2xl mx-auto mb-6 md:mb-10 leading-relaxed px-4 md:px-0"}," 智能生成小说架构、角色体系、世界观和章节大纲，让创作更高效 ",-1)),l(o(j),{type:"primary",size:"large",onClick:t[0]||(t[0]=i=>v.value=!0),class:"hidden md:inline-flex !px-8 !h-12 !text-base shadow-lg shadow-indigo-500/30 hover:shadow-indigo-500/40 transition-shadow"},{icon:d(()=>[l(o($),null,{default:d(()=>[l(o(A))]),_:1})]),default:d(()=>[t[5]||(t[5]=k(" 创建新项目 ",-1))]),_:1}),t[8]||(t[8]=e("div",{class:"md:hidden flex items-center justify-center gap-2 mt-4 flex-wrap"},[e("div",{class:"px-3 py-1 rounded-lg bg-white dark:bg-[#1f1f23] border border-gray-100 dark:border-gray-800 text-[11px] text-gray-500 dark:text-gray-400"}," 雪花写作法 "),e("div",{class:"px-3 py-1 rounded-lg bg-white dark:bg-[#1f1f23] border border-gray-100 dark:border-gray-800 text-[11px] text-gray-500 dark:text-gray-400"}," 本地存储 "),e("div",{class:"px-3 py-1 rounded-lg bg-white dark:bg-[#1f1f23] border border-gray-100 dark:border-gray-800 text-[11px] text-gray-500 dark:text-gray-400"}," 流式生成 ")],-1)),e("div",Ae,[e("div",Be,[(g(!0),m(D,null,P(_.value,i=>(g(),m("div",{key:i.label,class:"rounded-xl py-2.5 text-center bg-white/80 dark:bg-[#25252a]/80 border border-gray-100/80 dark:border-gray-700/70"},[e("div",Se,h(i.value),1),e("div",ze,h(i.label),1)]))),128))])])]),o(s).hasProjects?(g(),m("div",Ie,[e("div",Ue,[e("h2",qe,[t[9]||(t[9]=k(" 我的项目 ",-1)),e("span",Ge," ("+h(o(s).projectList.length)+") ",1)])]),e("div",Te,[(g(!0),m(D,null,P(o(s).projectList,i=>(g(),q(Ve,{key:i.id,project:i,onClick:p=>r(i),onDelete:p=>f(i)},null,8,["project","onClick","onDelete"]))),128))])])):(g(),m("div",Fe,[e("div",Le,[l(o(Z),{class:"w-10 h-10 text-gray-300 dark:text-gray-600"})]),t[11]||(t[11]=e("h3",{class:"text-lg font-semibold text-gray-800 dark:text-white mb-2"},"开启创作之旅",-1)),t[12]||(t[12]=e("p",{class:"text-gray-500 dark:text-gray-400 mb-8 text-sm"},"点击下方按钮创建你的第一个项目",-1)),l(o(j),{type:"primary",class:"md:hidden shadow-lg shadow-indigo-500/30 !px-8 !h-11",round:"",onClick:t[1]||(t[1]=i=>v.value=!0)},{default:d(()=>[...t[10]||(t[10]=[k(" 立即创建 ",-1)])]),_:1})])),o(s).hasProjects?(g(),m("div",Re,[e("button",{onClick:t[2]||(t[2]=i=>v.value=!0),class:"btn-unified w-14 h-14 rounded-2xl bg-gradient-to-br from-indigo-600 to-purple-600 text-white shadow-xl shadow-indigo-600/40 flex items-center justify-center active:scale-95 transition-transform"},[l(o($),{size:"28"},{default:d(()=>[l(o(A))]),_:1})])])):X("",!0),e("div",Ee,[t[19]||(t[19]=e("h2",{class:"text-2xl font-bold text-center text-gray-800 dark:text-white mb-10"},"核心功能",-1)),e("div",He,[e("div",We,[e("div",Je,[l(o(B),{class:"w-6 h-6 text-indigo-600 dark:text-indigo-400"})]),t[13]||(t[13]=e("h3",{class:"text-lg font-bold text-gray-800 dark:text-white mb-2"},"雪花写作法",-1)),t[14]||(t[14]=e("p",{class:"text-gray-500 dark:text-gray-400 text-sm leading-relaxed"}," 从核心种子开始，逐步扩展角色、世界观、情节架构，构建完整故事 ",-1))]),e("div",Ke,[e("div",Qe,[l(o(ee),{class:"w-6 h-6 text-purple-600 dark:text-purple-400"})]),t[15]||(t[15]=e("h3",{class:"text-lg font-bold text-gray-800 dark:text-white mb-2"},"角色弧光理论",-1)),t[16]||(t[16]=e("p",{class:"text-gray-500 dark:text-gray-400 text-sm leading-relaxed"}," 设计具有动态变化潜力的角色，包含驱动力三角和关系冲突网 ",-1))]),e("div",Xe,[e("div",Ye,[l(o(te),{class:"w-6 h-6 text-rose-600 dark:text-rose-400"})]),t[17]||(t[17]=e("h3",{class:"text-lg font-bold text-gray-800 dark:text-white mb-2"},"悬念节奏曲线",-1)),t[18]||(t[18]=e("p",{class:"text-gray-500 dark:text-gray-400 text-sm leading-relaxed"}," 智能规划章节节奏，设置认知过山车，保持读者阅读兴趣 ",-1))])])]),l(xe,{modelValue:v.value,"onUpdate:modelValue":t[3]||(t[3]=i=>v.value=i)},null,8,["modelValue"])]))}},rt=G(Ze,[["__scopeId","data-v-2a126a79"]]);export{rt as default};
