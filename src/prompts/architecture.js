/**
 * Architecture Prompts - 架构类提示词 (番茄小说/网文特供版)
 * 核心逻辑：爽点优先、节奏明快、冲突强烈
 */

/**
 * 核心种子提示词
 * 生成番茄小说风格的"钩子简介"
 */
export const coreSeed = (params) => `
你是番茄小说TOP10签约作者，擅长写让读者一秒入坑的简介。

主题/创意：${params.topic}
类型：${params.genre}
篇幅：约${params.numberOfChapters}章（每章${params.wordNumber}字）

请根据上述信息，生成一篇**番茄小说风格的简介/核心种子**。

---

**【标准结构】**

1. **世界观一句话**：用一句话勾勒出这个世界最残酷/最吸引人的规则。

2. **主角开局地狱难度**：
   - 谁？什么身份？
   - 开局有多惨？（命格/体质/处境，越具体越好）
   - 被谁踩？被谁看不起？

3. **金手指觉醒**：
   - 发生了什么变化？
   - 金手指的核心能力是什么？

4. **金手指效果展示（2-3个具体例子）**：
   - 用"某个破东西 → 【修改/升级后】→ 逆天效果"的格式展示。
   - 要有画面感，让读者能想象到爽点。

5. **对敌人的打脸预告**：
   - 用对话或场景，展示主角如何碾压那些曾经看不起他的人。
   - 要有嘲讽感/爽感。

6. **霸气Tagline**：
   - 结尾用一句话概括主角的态度/野心。
   - 要有"金句"感，让读者想截图分享。

---

**【示例风格参考】**

（你生成的内容应该像这样，但内容要完全原创）

> **穿越XX界，这是一个XX决定命运的世界。**
> 没有XX？那你终其一生，也只能做个XX。
> 林凡开局便是地狱难度：XX宗的一名卑微杂役，命格【XX之相】...
> 直到他发现，自己眼中的世界变了——万物皆有XX，而他，拥有唯一的**XX权限**！
> 手中的废铁剑是【XX（灰）】？——修改！覆盖【XX（金）】...
> **"什么？你说你是XX？"**
> 林凡微微一笑，点击了【全选删除】。
> **这一世，我不求XX，只问一句：阁下的XX，保熟吗？**

---

**硬性要求**：
1. 必须有2-3个金手指效果的**具体展示**，不能只是干巴巴的设定。
2. 必须有对话或场景展示打脸预告。
3. 结尾必须有一句霸气Tagline。
4. 全文300-600字，保持节奏紧凑，一气呵成。
5. 禁止用"本书讲述了..."这种第三方视角。

仅返回简介正文，不要解释任何内容。
`

/**
 * 角色动力学提示词
 * 设计“好代入的主角”和“好打脸的反派”
 */
export const characterDynamics = (params) => `
基于以下元素：
- 小说类型：${params.genre || '爽文'}
- 内容指导：${params.userGuidance || '无'}
- 核心种子：${params.coreSeed}

请设计“番茄可连载角色班底”，共3-6个核心角色，必须包含：
- 主角（唯一叙事中心）
- 一级反派（当前卷打脸对象）
- 二级反派或幕后势力（后续卷压力源）
- 1-3个功能配角（女主/搭档/小弟/导师）

输出格式（每个角色都严格按此结构）：
【角色名｜定位】
- 一眼标签：
- 立场与目标：
- 与主角冲突/利益点：
- 可被打脸点（弱点）：
- 标志台词（15字内）：
- 近期剧情功能（3章内）：

硬性要求：
1. 主角必须同时具备：开局缺口 + 逆鳞 + 金手指 + 短期目标。
2. 反派至少两级阶梯，不能只有一个脸谱敌人。
3. 名字要好记、读感顺口，不要生僻字堆砌。
4. 角色功能必须直接服务“冲突升级/爽点兑现/章末钩子”。
5. 禁止复杂群像和灰色价值摇摆，优先清晰对立。

要求：
仅给出最终文本，不要解释任何内容。
`

/**
 * 世界观构建提示词
 * 构建"可持续打脸"的世界框架，根据总章数动态缩放
 */
export const worldBuilding = (params) => {
   // 根据总章数动态计算所需层级
   const chapters = params.numberOfChapters || 100
   const powerTiers = Math.max(8, Math.ceil(chapters / 40)) // 每40章约1个大境界
   const mapLayers = Math.max(4, Math.ceil(chapters / 80)) // 每80章约1张新地图
   const sceneCount = Math.max(5, Math.ceil(chapters / 30)) // 每30章约1个名场面

   return `
基于以下元素：
- 小说类型：${params.genre || '爽文'}
- 内容指导：${params.userGuidance || '无'}
- 核心故事："${params.coreSeed}"
- **总篇幅：${chapters}章**（这决定了世界的纵深程度！）

请构建一个**让读者期待的世界框架**，不是百科全书式设定，而是"读者想看到什么场景"导向。

⚠️ **篇幅警告**：本书共${chapters}章，你设计的等级、地图、势力必须足够支撑这个篇幅！
- 如果100章就能登顶，那是失败的设计。
- 主角在第${Math.floor(chapters * 0.1)}章应该还在最底层挣扎。
- 主角在第${Math.floor(chapters * 0.5)}章应该还有巨大的成长空间。
- 真正的"天下第一"只能在最后5%的章节才能实现。

---

**【第一部分：升级阶梯】**（${powerTiers}阶+子等级）

你需要设计**${powerTiers}个大境界**，每个大境界内还有**9个小阶段**（初期/中期/后期，各3层）。
每一阶必须写清：
- 门槛条件（怎么才能升上去，需要多少资源/时间）
- 代表能力（这个等级能做什么牛逼事）
- 可碾压对象（能秒杀什么级别的人）
- "一阶压一阶"的社会待遇差距
- **突破难度**：普通人需要多少年？天才需要多少年？主角预计在第几章达到？

重要：
- 前3个境界可以在前100章完成
- 中间境界要设置"瓶颈"，很难跨越
- 最后3个境界必须是"传说级"，整个世界能达到的人屈指可数
- 如果是末日类：不仅有个人等级，还要有"势力等级"、"领地等级"、"科技等级"等多维进度条

**【第二部分：地图推进】**（${mapLayers}层递进）
格式：当前地图 → 下一地图 → 跨图条件（需要什么等级/资源/事件）
每张地图必须包含：
- 1个机缘点（主角能获得什么）
- 1个压迫点（谁会看不起主角）
- 1个名场面预设（如：宗门大比/拍卖会/秘境争夺）
- **预计停留章数**：主角大概在这张地图待多少章？

地图设计原则：
- 每张新地图的"顶级强者"都比上一张地图强一个大境界
- 主角每次换图，都要从"新地图底层"重新开始打脸

**【第三部分：读者期待的名场面】**（至少${sceneCount}个）
列出读者最想看到的经典场景，例如：
- 宗门大比：主角一路碾压，天才们纷纷失态
- 拍卖会：主角财大气粗，打脸世家少爷
- 秘境探险：主角捡到至宝，别人干瞪眼
- 登门挑战：昔日踩主角的人跪求原谅
- 大婚抢亲：主角在婚礼上带走新娘

请根据【${params.genre}】类型和${chapters}章篇幅，设计**专属于这本书的${sceneCount}个名场面**，并标注大概在第几章触发。
名场面要均匀分布，不能前100章全用完！

**【第四部分：势力盘面】**（至少6个势力，分层级）
势力也要分层：
- 村/镇级势力（前50章的对手）
- 城/郡级势力（50-200章的对手）
- 国/域级势力（200-500章的对手）
- 洲/界级势力（500章以后的对手）
${chapters > 500 ? '- 宇宙/多元级势力（后期终极BOSS）' : ''}

每个势力写明：
- 势力立场和利益诉求
- 与主角当前关系（敌/友/可转化）
- "打脸价值"评估（踩过主角？欠揍程度？）
- **登场章节区间**：这个势力大概在第几章到第几章是主要对手？

**【第五部分：资源体系】**（至少8项，分稀有度）
- 资源名称
- 稀有度等级（白/绿/蓝/紫/金/红）
- 获取方式
- 即时收益 + 长线收益
- 谁在争夺（可制造冲突）
- **解锁条件**：主角达到什么等级才能接触到这种资源？

**【第六部分：假天花板设计】**（至少${Math.ceil(chapters / 200)}个）
这是长篇小说的核心技巧！每隔一段剧情，读者和主角都以为"到顶了"，结果发现上面还有天：
- 第一个假天花板：大概在第${Math.floor(chapters * 0.15)}章，主角以为自己很强了，结果...
- 第二个假天花板：大概在第${Math.floor(chapters * 0.35)}章，主角成为某个圈子的顶尖，结果...
${chapters > 300 ? `- 第三个假天花板：大概在第${Math.floor(chapters * 0.55)}章，主角以为天下无敌，结果...` : ''}
${chapters > 500 ? `- 第四个假天花板：大概在第${Math.floor(chapters * 0.75)}章，发现更大的世界...` : ''}

每个假天花板必须写：
- 主角当时的等级和地位
- 主角以为的"世界顶点"是什么
- 真正的"更高层次"是什么
- 用什么事件打破这个认知

---

硬性要求：
1. 每个模块都要能直接推动剧情决策，不要纯百科。
2. "假天花板"是最重要的部分，必须让读者有持续追下去的动力。
3. 禁止空泛世界观说明、无关历史考据。
4. 所有设计必须能支撑${chapters}章的篇幅，禁止100章内就设计完毕！

仅给出最终文本，不要解释任何内容。
`
}


/**
 * 情节架构提示词
 * 结合网文节奏的定制化结构
 */
export const plotArchitecture = (params) => `
基于以下元素：
- 小说类型：${params.genre || '爽文'}
- 内容指导：${params.userGuidance || '无'}
- 核心种子：${params.coreSeed}
- 角色体系：${params.characterDynamics}
- 世界观：${params.worldBuilding}

请根据【${params.genre}】设计“番茄连载架构”，以“卷”为单位输出（本书共${params.numberOfChapters || 100}章，预计分${Math.ceil((params.numberOfChapters || 100) / 80)}卷，禁止中期就天下无敌）。

先给出总纲，再逐卷展开。每卷都必须包含：
- 卷名与卷目标
- 卷内主冲突（谁压主角）
- 核心爽点兑现节点（第几章）
- 关键收益（战力/地位/资源/关系）
- 卷末强钩子（新敌/新地图/新真相）

硬性节奏规则：
1. 前5章固定起势：
- 第1章：受压+强钩子
- 第2章：金手指显效
- 第3章：首次打脸兑现
- 第4-5章：扩大影响+埋下更高阶敌人
2. 每章至少推进1个变量：实力、关系、地位、信息四选一或多选。
3. 每3章一个小高潮，每8-12章一个大高潮。
4. 每卷结尾必须让主角“状态跃迁”一次（身份/资源/战力明显上升）。
5. 禁止连续两章纯铺垫；若出现压抑，必须在1章内回收并反打。

要求：
仅给出最终文本，不要解释任何内容。
`

/**
 * 角色状态提示词
 * 保持原逻辑，但内容倾向于数值和装备
 */
export const characterState = (params) => `
依据当前角色动力学设定：${params.characterDynamics}

请生成“番茄连载角色状态面板”，突出可用于下一章冲突的动态信息。

输出格式（每个主要角色都按此结构）：
角色名：
├──当前战力/地位
│  ├──等级/权势：
│  └──公众认知：
├──资产/道具
│  ├──核心资源：
│  └──可消耗底牌：
├──金手指/能力状态
│  ├──已解锁：
│  ├──冷却/限制：
│  └──下次升级条件：
├──关系与仇恨
│  ├──当前盟友：
│  ├──当前敌对：
│  └──优先打脸目标：
├──当前处境
│  ├──正在承受的压力：
│  └──剩余窗口期/倒计时：
└──下一章可触发事件：

要求：
1. 只保留当前剧情仍活跃的角色（一般不超过8个）。
2. 每个角色必须有“可行动的下一步”，不能只有静态描述。
3. 变化要可量化或可感知（更强/更穷/更危险/更有名）。
仅返回编写好的角色状态文本，不要解释任何内容。
`

/**
 * 导出所有架构类提示词
 */
export const architecturePrompts = {
   coreSeed,
   characterDynamics,
   worldBuilding,
   plotArchitecture,
   characterState
}
